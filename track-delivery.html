<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Track Your Delivery - Green Light Automotive</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .tracking-container {
            max-width: 1200px;
            margin: 100px auto 50px;
            padding: 0 20px;
        }

        .tracking-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .tracking-header h1 {
            font-size: 2.5rem;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .tracking-header p {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        .tracking-search {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }

        .search-form {
            display: flex;
            gap: 15px;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--green-primary);
        }

        .search-btn {
            padding: 15px 30px;
            background: var(--green-primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .search-btn:hover {
            background: var(--green-dark);
        }

        .tracking-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
        }

        .delivery-info {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .delivery-status {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: #e8f5e9;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .status-icon {
            width: 50px;
            height: 50px;
            background: var(--green-primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .status-text h3 {
            margin: 0;
            color: var(--green-primary);
            font-size: 1.2rem;
        }

        .status-text p {
            margin: 5px 0 0;
            color: #666;
        }

        .delivery-details h4 {
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }

        .detail-label {
            color: #666;
            font-weight: 500;
        }

        .detail-value {
            color: var(--text-primary);
            font-weight: 600;
        }

        .tracking-timeline {
            margin-top: 30px;
        }

        .timeline-item {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            position: relative;
        }

        .timeline-item:not(:last-child)::before {
            content: '';
            position: absolute;
            left: 19px;
            top: 40px;
            width: 2px;
            height: calc(100% + 5px);
            background: #e0e0e0;
        }

        .timeline-dot {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #f5f5f5;
            border: 2px solid #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            z-index: 1;
        }

        .timeline-dot.completed {
            background: var(--green-primary);
            border-color: var(--green-primary);
            color: white;
        }

        .timeline-dot.current {
            background: white;
            border-color: var(--green-primary);
            color: var(--green-primary);
            border-width: 3px;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-content h5 {
            margin: 0 0 5px;
            color: var(--text-primary);
        }

        .timeline-content p {
            margin: 0;
            color: #666;
            font-size: 0.9rem;
        }

        .map-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
            height: 600px;
            position: relative;
        }

        #map {
            width: 100%;
            height: 100%;
        }

        .map-overlay {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            max-width: 300px;
            z-index: 1000;
        }

        .driver-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .driver-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #666;
        }

        .driver-details h4 {
            margin: 0 0 5px;
            color: var(--text-primary);
        }

        .driver-details p {
            margin: 0;
            color: #666;
            font-size: 0.9rem;
        }

        .delivery-eta {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }

        .delivery-eta h5 {
            margin: 0 0 5px;
            color: #666;
            font-weight: 500;
        }

        .delivery-eta p {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--green-primary);
        }

        .contact-driver {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .contact-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .contact-btn.call {
            background: var(--green-primary);
            color: white;
        }

        .contact-btn.message {
            background: white;
            color: var(--green-primary);
            border: 2px solid var(--green-primary);
        }

        .contact-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .no-tracking {
            text-align: center;
            padding: 60px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .no-tracking i {
            font-size: 4rem;
            color: #e0e0e0;
            margin-bottom: 20px;
        }

        .no-tracking h3 {
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .no-tracking p {
            color: #666;
        }

        @media (max-width: 768px) {
            .tracking-content {
                grid-template-columns: 1fr;
            }

            .map-container {
                height: 400px;
            }

            .map-overlay {
                position: relative;
                top: 0;
                right: 0;
                max-width: 100%;
                margin-top: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Header -->
    <header class="header">
        <nav class="navbar">
            <div class="container">
                <div class="nav-wrapper">
                    <a href="index.html" class="logo">
                        <h1>Green Light Automotive</h1>
                    </a>
                    <button class="mobile-menu-toggle" id="mobileMenuToggle">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    <ul class="nav-menu" id="navMenu">
                        <li><a href="index.html#get-approved">Get Pre-Approved</a></li>
                        <li><a href="sell-car-wizard.html">Sell My Car</a></li>
                        <li><a href="track-delivery.html" class="active">Track Delivery</a></li>
                        <li><a href="index.html#why-us">Our Story</a></li>
                        <li><a href="index.html#resources">Resources</a></li>
                        <li><a href="/admin" class="admin-link"><i class="fas fa-lock"></i> Admin</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main class="tracking-container">
        <div class="tracking-header">
            <h1>Track Your Vehicle Delivery</h1>
            <p>Enter your order number or tracking ID to see real-time delivery updates</p>
        </div>

        <div class="tracking-search">
            <form class="search-form" onsubmit="trackDelivery(event)">
                <input 
                    type="text" 
                    class="search-input" 
                    id="trackingNumber"
                    placeholder="Enter order number or tracking ID"
                    required
                >
                <button type="submit" class="search-btn">
                    <i class="fas fa-search"></i> Track
                </button>
            </form>
        </div>

        <!-- Tracking Results (Hidden by default) -->
        <div id="trackingResults" style="display: none;">
            <div class="tracking-content">
                <div class="delivery-info">
                    <div class="delivery-status">
                        <div class="status-icon">
                            <i class="fas fa-truck"></i>
                        </div>
                        <div class="status-text">
                            <h3>In Transit</h3>
                            <p>Your vehicle is on the way!</p>
                        </div>
                    </div>

                    <div class="delivery-details">
                        <h4>Delivery Details</h4>
                        <div class="detail-item">
                            <span class="detail-label">Order Number</span>
                            <span class="detail-value" id="orderNumber">GLA-2024-1234</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Vehicle</span>
                            <span class="detail-value" id="vehicleInfo">2023 Toyota Camry SE</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Pickup Location</span>
                            <span class="detail-value" id="pickupLocation">Toronto, ON</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Delivery Address</span>
                            <span class="detail-value" id="deliveryAddress">123 Main St, Ottawa, ON</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Estimated Delivery</span>
                            <span class="detail-value" id="estimatedDelivery">Today, 3:00 PM - 5:00 PM</span>
                        </div>
                    </div>

                    <div class="tracking-timeline">
                        <h4>Delivery Progress</h4>
                        <div class="timeline-item">
                            <div class="timeline-dot completed">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="timeline-content">
                                <h5>Order Confirmed</h5>
                                <p>Yesterday, 2:30 PM</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot completed">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="timeline-content">
                                <h5>Vehicle Picked Up</h5>
                                <p>Today, 9:15 AM</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot current">
                                <i class="fas fa-truck"></i>
                            </div>
                            <div class="timeline-content">
                                <h5>In Transit</h5>
                                <p>Currently en route to delivery address</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot">
                                <i class="fas fa-home"></i>
                            </div>
                            <div class="timeline-content">
                                <h5>Delivered</h5>
                                <p>Pending</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="map-container">
                    <div id="map"></div>
                    <div class="map-overlay">
                        <div class="driver-info">
                            <div class="driver-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="driver-details">
                                <h4>John Smith</h4>
                                <p>Professional Driver</p>
                                <p style="color: #ffa500;">
                                    <i class="fas fa-star"></i> 4.9 Rating
                                </p>
                            </div>
                        </div>
                        
                        <div class="delivery-eta">
                            <h5>Estimated Arrival</h5>
                            <p id="etaTime">45 minutes</p>
                        </div>

                        <div class="contact-driver">
                            <button class="contact-btn call" onclick="callDriver()">
                                <i class="fas fa-phone"></i> Call
                            </button>
                            <button class="contact-btn message" onclick="messageDriver()">
                                <i class="fas fa-comment"></i> Message
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- No Tracking Found (Hidden by default) -->
        <div id="noTracking" class="no-tracking" style="display: none;">
            <i class="fas fa-search"></i>
            <h3>No Delivery Found</h3>
            <p>We couldn't find any delivery with that tracking number. Please check and try again.</p>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Careers</a></li>
                        <li><a href="#">Press</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Services</h4>
                    <ul>
                        <li><a href="#">Car Financing</a></li>
                        <li><a href="#">Sell Your Car</a></li>
                        <li><a href="#">Trade-In</a></li>
                        <li><a href="#">Delivery Tracking</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">FAQs</a></li>
                        <li><a href="#">Car Reviews</a></li>
                        <li><a href="#">Financing Guide</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Connect With Green Light</h4>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Green Light Automotive. All rights reserved.</p>
                <div class="footer-links">
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Service</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Google Maps API -->
    <script>
        let map;
        let driverMarker;
        let destinationMarker;
        let directionsService;
        let directionsRenderer;
        let driverLocation = { lat: 45.4215, lng: -75.6972 }; // Ottawa starting point
        let destinationLocation = { lat: 45.3876, lng: -75.6960 }; // Example destination

        async function initMap() {
            // Load the maps library
            const { Map } = await google.maps.importLibrary("maps");
            const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");
            // Initialize map centered on Ottawa
            map = new Map(document.getElementById('map'), {
                zoom: 12,
                center: driverLocation,
                styles: [
                    {
                        featureType: "poi",
                        elementType: "labels",
                        stylers: [{ visibility: "off" }]
                    }
                ]
            });

            // Initialize directions service
            directionsService = new google.maps.DirectionsService();
            directionsRenderer = new google.maps.DirectionsRenderer({
                suppressMarkers: true,
                polylineOptions: {
                    strokeColor: '#0a5c3e',
                    strokeWeight: 4
                }
            });
            directionsRenderer.setMap(map);

            // Add custom markers using AdvancedMarkerElement
            
            // Driver marker
            const driverIcon = document.createElement('div');
            driverIcon.innerHTML = `
                <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="20" cy="20" r="18" fill="#0a5c3e" stroke="white" stroke-width="2"/>
                    <path d="M12 18 L20 14 L28 18 L28 24 L20 28 L12 24 Z" fill="white"/>
                </svg>
            `;
            
            driverMarker = new AdvancedMarkerElement({
                position: driverLocation,
                map: map,
                title: 'Driver Location',
                content: driverIcon
            });

            // Destination marker
            const destIcon = document.createElement('div');
            destIcon.innerHTML = `
                <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="20" cy="20" r="18" fill="#dc3545" stroke="white" stroke-width="2"/>
                    <path d="M20 10 L26 16 L26 24 L20 30 L14 24 L14 16 Z" fill="white"/>
                </svg>
            `;
            
            destinationMarker = new AdvancedMarkerElement({
                position: destinationLocation,
                map: map,
                title: 'Delivery Destination',
                content: destIcon
            });

            // Calculate and display route
            calculateRoute();

            // Simulate driver movement
            simulateDriverMovement();
        }

        function calculateRoute() {
            const request = {
                origin: driverLocation,
                destination: destinationLocation,
                travelMode: google.maps.TravelMode.DRIVING
            };

            directionsService.route(request, (result, status) => {
                if (status === 'OK') {
                    directionsRenderer.setDirections(result);
                    
                    // Update ETA
                    const duration = result.routes[0].legs[0].duration.text;
                    document.getElementById('etaTime').textContent = duration;
                }
            });
        }

        function simulateDriverMovement() {
            // Simulate driver moving along the route
            let progress = 0;
            setInterval(() => {
                progress += 0.01;
                if (progress > 1) progress = 0;

                // Calculate intermediate position
                const lat = driverLocation.lat + (destinationLocation.lat - driverLocation.lat) * progress;
                const lng = driverLocation.lng + (destinationLocation.lng - driverLocation.lng) * progress;
                
                const newPosition = { lat, lng };
                driverMarker.position = newPosition;

                // Update ETA based on progress
                const remainingMinutes = Math.round((1 - progress) * 45);
                document.getElementById('etaTime').textContent = `${remainingMinutes} minutes`;
            }, 2000); // Update every 2 seconds
        }

        async function trackDelivery(event) {
            event.preventDefault();
            const trackingNumber = document.getElementById('trackingNumber').value.trim();
            
            try {
                // Call API to get tracking info
                const response = await fetch(`/api/track/${trackingNumber}`);
                const data = await response.json();
                
                if (response.ok) {
                    // Update UI with real data
                    updateTrackingUI(data);
                    
                    // Show tracking results
                    document.getElementById('trackingResults').style.display = 'block';
                    document.getElementById('noTracking').style.display = 'none';
                    
                    // Initialize map with real coordinates
                    if (typeof google !== 'undefined') {
                        driverLocation = { lat: data.current_lat, lng: data.current_lng };
                        destinationLocation = { lat: data.destination_lat, lng: data.destination_lng };
                        
                        if (!map) {
                            initMap();
                        } else {
                            // Update marker positions
                            driverMarker.position = driverLocation;
                            destinationMarker.position = destinationLocation;
                            calculateRoute();
                        }
                    }
                    
                    // Scroll to results
                    document.getElementById('trackingResults').scrollIntoView({ behavior: 'smooth' });
                } else {
                    // Show no tracking found
                    document.getElementById('trackingResults').style.display = 'none';
                    document.getElementById('noTracking').style.display = 'block';
                }
            } catch (error) {
                console.error('Error fetching tracking data:', error);
                document.getElementById('trackingResults').style.display = 'none';
                document.getElementById('noTracking').style.display = 'block';
            }
        }
        
        function updateTrackingUI(data) {
            // Update delivery details
            document.getElementById('orderNumber').textContent = data.order_number;
            document.getElementById('vehicleInfo').textContent = data.vehicle_info;
            document.getElementById('pickupLocation').textContent = data.pickup_location;
            document.getElementById('deliveryAddress').textContent = data.delivery_address;
            document.getElementById('estimatedDelivery').textContent = data.estimated_delivery;
            
            // Update driver info
            document.querySelector('.driver-details h4').textContent = data.driver_name;
            
            // Update status
            const statusText = {
                'confirmed': 'Order Confirmed',
                'picked_up': 'Vehicle Picked Up',
                'in_transit': 'In Transit',
                'delivered': 'Delivered'
            };
            
            document.querySelector('.status-text h3').textContent = statusText[data.status] || 'Processing';
            
            // Update timeline
            if (data.timeline) {
                updateTimeline(data.timeline);
            }
        }
        
        function updateTimeline(timeline) {
            const timelineContainer = document.querySelector('.tracking-timeline');
            const timelineHTML = timeline.map(item => `
                <div class="timeline-item">
                    <div class="timeline-dot ${item.completed ? 'completed' : ''} ${item.current ? 'current' : ''}">
                        <i class="fas ${item.completed ? 'fa-check' : item.current ? 'fa-truck' : 'fa-home'}"></i>
                    </div>
                    <div class="timeline-content">
                        <h5>${item.title}</h5>
                        <p>${item.time}</p>
                    </div>
                </div>
            `).join('');
            
            timelineContainer.innerHTML = '<h4>Delivery Progress</h4>' + timelineHTML;
        }

        function callDriver() {
            alert('Calling driver: (555) 123-4567');
        }

        function messageDriver() {
            alert('Opening message interface...');
        }

        // Mobile menu toggle
        document.getElementById('mobileMenuToggle').addEventListener('click', function() {
            document.getElementById('navMenu').classList.toggle('active');
        });
    </script>

    <!-- Socket.io for real-time updates -->
    <script src="/socket.io/socket.io.js"></script>
    
    <script>
        // Real-time tracking enhancement
        let trackingSocket;
        
        function connectToRealTimeTracking(trackingId) {
            // Connect to tracking namespace
            trackingSocket = io('/tracking');
            
            trackingSocket.on('connect', () => {
                console.log('Connected to real-time tracking');
                // Join tracking room
                trackingSocket.emit('track-delivery', trackingId);
            });
            
            // Listen for location updates
            trackingSocket.on('location-update', (data) => {
                console.log('Location update:', data);
                
                // Update driver marker position
                if (driverMarker) {
                    const newPosition = { lat: data.location.lat, lng: data.location.lng };
                    driverMarker.position = newPosition;
                    
                    // Smoothly pan map to follow driver
                    if (map.getBounds() && !map.getBounds().contains(new google.maps.LatLng(newPosition.lat, newPosition.lng))) {
                        map.panTo(newPosition);
                    }
                }
                
                // Update speed if provided
                if (data.speed !== undefined) {
                    const speedKmh = Math.round(data.speed * 3.6); // m/s to km/h
                    document.getElementById('etaTime').textContent = `${speedKmh} km/h`;
                }
            });
            
            // Listen for status updates
            trackingSocket.on('status-update', (data) => {
                console.log('Status update:', data);
                document.querySelector('.status-text h3').textContent = data.message;
            });
            
            // Listen for delivery completion
            trackingSocket.on('delivery-completed', (data) => {
                console.log('Delivery completed:', data);
                
                // Update UI
                document.querySelector('.status-text h3').textContent = 'Delivered!';
                document.querySelector('.status-text p').textContent = 'Your vehicle has been delivered successfully';
                document.querySelector('.status-icon i').className = 'fas fa-check-circle';
                
                // Update timeline
                const timeline = document.querySelector('.tracking-timeline');
                const lastItem = timeline.querySelector('.timeline-item:last-child');
                lastItem.querySelector('.timeline-dot').classList.add('completed');
                lastItem.querySelector('.timeline-content p').textContent = new Date().toLocaleTimeString();
                
                // Show completion message
                if (data.notes) {
                    alert(`Delivery completed! Notes: ${data.notes}`);
                } else {
                    alert('Your vehicle has been delivered successfully!');
                }
            });
            
            // Listen for delivery updates
            trackingSocket.on('delivery-update', (delivery) => {
                console.log('Delivery data update:', delivery);
                updateTrackingUI(delivery);
            });
            
            trackingSocket.on('disconnect', () => {
                console.log('Disconnected from real-time tracking');
            });
        }
        
        // Update the existing trackDelivery function
        const originalTrackDelivery = trackDelivery;
        trackDelivery = async function(event) {
            await originalTrackDelivery(event);
            
            // If tracking successful, connect to real-time updates
            const trackingNumber = document.getElementById('trackingNumber').value.trim();
            if (document.getElementById('trackingResults').style.display !== 'none') {
                connectToRealTimeTracking(trackingNumber);
            }
        };
        
        // Disconnect when leaving page
        window.addEventListener('beforeunload', () => {
            if (trackingSocket) {
                trackingSocket.disconnect();
            }
        });
    </script>

    <!-- Google Maps JavaScript API -->
    <script>
        // Initialize maps when page loads
        window.addEventListener('load', () => {
            initMap().catch(console.error);
        });
        
        // Handle authentication failures
        window.gm_authFailure = function() {
            console.error('Google Maps authentication failed. Please check your API key and ensure the Maps JavaScript API is enabled.');
            alert('Google Maps authentication failed. Please ensure the Maps JavaScript API is enabled in your Google Cloud Console.');
        };
    </script>
    <script>
        (g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})({
            key: "AIzaSyBEBdu5vOONDHNbAu0Hxv9Ko5BQRd20C_Y",
            v: "weekly",
        });
    </script>
</body>
</html>